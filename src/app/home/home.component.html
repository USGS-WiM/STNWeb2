<!-- 
    Main body wrapper 
    Main body wrapper 
    Main body wrapper 
  -->
<div id="outer">
  <div id="body">

    <!-- 
      Sidebar
      Sidebar
     -->
    <!-- <div id="sidebar">

      <div style="text-align: center;">
        <hr>
        <h4>Show currently forming Ice Jams:</h4>
        <mat-slide-toggle></mat-slide-toggle>
      </div>
    </div> -->
    <!-- End Sidebar -->


    <!-- 
      Content 
      Content 
      Content 
    -->
    <main>

      <!-- Map -->
      <div id="map">
        <div id="latLngScale" class="latLngScale">
          <span class="hover-content"> <b>Map scale </b></span>
          1:<span id="scale">{{mapScale}}</span> | <span class="hover-content"> <b>Zoom level </b></span> <span id="zoomLevel">
            {{zoomLevel}}</span><br>
          <span class="hover-content"><b>Latitude</b></span>
          <span id="latitude"> {{latitude}}</span> |
          <span class="hover-content"> <b>Longitude</b></span>
          <span id="longitude"> {{longitude}}</span>
          <span id="mapCenterLabel" class="hover-content"></span>
        </div>
      </div>

      <a mat-raised-button color="accent" id="newEventButton" style="font-weight: bold;" routerLink="/addSite">
        <mat-icon>add</mat-icon>New Site
      </a>


      <!-- TO DO NEED TO FIGURE HOW TO DEAL WITH MULTIPLE RIVERCONDITIONS,ICECONDTIONS, ETC...-->
      <div class="block">
        Select a site to see a list of Ice Jam Events at that site. <span>{{ this.siteName }}</span>
        <mat-accordion style="overflow-y: auto">
          <mat-spinner *ngIf="eventsLoading" [diameter]="20"></mat-spinner>
          <mat-expansion-panel *ngFor="let event of eventtest">
            <mat-expansion-panel-header>
              <b>Ice Jam Date: </b> &nbsp;{{event.observationDateTime | date: 'EEEE, MMMM d, h:mm' }}
            </mat-expansion-panel-header>
            <b>Description: </b>{{event.description || 'n/a' }}<br>
            <b>Comments: </b>{{event.comments || 'n/a' }}<br>
            <span><b>Jam Type: </b>{{event.type.name || 'n/a' }}<br></span>

            <!-- RIVER -->
            <span *ngFor="let riverCondition of event.riverConditions; let i = index">
              <hr>
              <b>River Conditions </b><br>
              <b>Date: </b>{{ (riverCondition.dateTime | date:'mediumDate') || 'n/a' }}<br>
              <span [ngSwitch]="riverCondition.riverConditionTypeID">
                <span *ngSwitchCase="1"><b>Condition type:</b> Bankfull<br></span>
                <span *ngSwitchCase="2"><b>Condition type: </b>Flooding<br></span>
                <span *ngSwitchDefault><b>Condition type: </b>n/a</span>
              </span>
              <!-- <b>Condition type: </b>{{ event.riverConditions[0].riverConditionTypeID || 'n/a' }}<br> -->
              <span [ngSwitch]="riverCondition.stageTypeID">
                <span *ngSwitchCase="1"><b>Stage:</b> Drop down<br></span>
                <span *ngSwitchCase="2"><b>Stage:</b> Gage reading<br></span>
                <span *ngSwitchDefault><b>Stage:</b> n/a</span>
              </span>
              <span [ngSwitch]="riverCondition.isChanging">
                <span *ngSwitchCase="true"><b>Is it changing?</b> Yes<br></span>
                <span *ngSwitchCase="false"><b>Is it changing?</b> No<br></span>
                <span *ngSwitchDefault><b>Is it changing?</b> n/a</span>
              </span>
              <b>Measurement: </b>{{ riverCondition.measurement || 'n/a' }}<br>
              <b>Comments: </b>{{ riverCondition.comments || 'n/a'}}<br>
            </span>

            <!-- ICE -->
            <span *ngIf="event.iceConditions">
            <div class="mat-table">
                <div class="mat-header-row">
                  <div class="mat-header-cell">Date</div>
                  <div class="mat-header-cell">Ice Condition</div>
                  <div class="mat-header-cell">Measurement</div>
                  <div class="mat-header-cell">Is Estimated?</div>
                  <div class="mat-header-cell">Is Changing?</div>
                  <div class="mat-header-cell">Comments</div>
                  <div class="mat-header-cell">Upstream End Location</div>
                  <div class="mat-header-cell">Downstream End Location</div>
                  <div class="mat-header-cell">Roughness</div>
                </div>
                <span *ngFor="let iceCondition of event.iceConditions; let i = index">
                  <div class="mat-row">
                    <div class="mat-cell">{{(iceCondition.dateTime | date) || 'n/a' }}</div>
                    <div class="mat-cell">
                      <span [ngSwitch]="iceCondition.iceConditionTypeID">
                        <span *ngSwitchCase="1">Ice decaying</span>
                        <span *ngSwitchCase="2">showing signs of melting</span>
                        <span *ngSwitchCase="3">Ice showing signs of melting</span>
                        <span *ngSwitchCase="4">Ice showing signs of candling</span>
                        <span *ngSwitchCase="5">Ice showing signs of cracking</span>
                        <span *ngSwitchCase="7">Ice showing signs of candling</span>
                        <span *ngSwitchCase="false">Ice showing signs of breakup</span>
                        <span *ngSwitchDefault>n/a</span>
                      </span>
                    </div>
                    <div class="mat-cell">{{iceCondition.measurement || 'n/a'}}</div>
                    <div class="mat-cell">
                        <span [ngSwitch]="iceCondition.isEstimated">
                            <span *ngSwitchCase="true">Yes</span>
                            <span *ngSwitchCase="false">No</span>
                            <span *ngSwitchDefault>n/a</span>
                          </span>
                    </div>
                    <div class="mat-cell">
                        <span [ngSwitch]="iceCondition.isChanging">
                            <span *ngSwitchCase="true">Yes</span>
                            <span *ngSwitchCase="false">No</span>
                            <span *ngSwitchDefault>n/a</span>
                          </span>
                    </div>
                    <div class="mat-cell">{{iceCondition.comments || 'n/a'}}</div>
                    <div class="mat-cell">{{iceCondition.upstreamEndLocation || 'n/a'}}</div>
                    <div class="mat-cell">{{iceCondition.downstreamEndLocation || 'n/a'}}</div>
                    <div class="mat-cell">
                      <span [ngSwitch]="iceCondition.roughnessTypeID">
                        <span *ngSwitchCase="1">Smooth</span>
                        <span *ngSwitchCase="2"> &#60; 0.5 </span>
                        <span *ngSwitchCase="3"> &#60; 1.0 </span>
                        <span *ngSwitchCase="4"> &#60; 1.5 </span>
                        <span *ngSwitchCase="5"> &#62; 1.5 </span>
                        <span *ngSwitchDefault>n/a </span>
                      </span>
                    </div>
                  </div>
                </span>
              </div>
            </span>
            

            <!-- WEATHER -->
            <span *ngIf="event.weatherConditions">
              <hr>
              <b>Weather Conditions </b><br>
              <b>Date: </b>{{ (event.weatherConditions[0].dateTime | date:'mediumDate') || 'n/a' }}<br>
              <span [ngSwitch]="event.weatherConditions[0].weatherConditionType">
                <span *ngSwitchCase="1"><b>Weather conditions:</b> Water Temperature (F)<br></span>
                <span *ngSwitchCase="2"><b>Weather conditions:</b> Air Temperature (F)<br></span>
                <span *ngSwitchCase="3"><b>Weather conditions:</b> Rain<br></span>
                <span *ngSwitchCase="4"><b>Weather conditions:</b> Snow depth (in)<br></span>
                <span *ngSwitchCase="5"><b>Weather conditions:</b> Average Wind speed (mph)<br></span>
                <span *ngSwitchCase="6"><b>Weather conditions:</b> Wind Direction<br></span>
                <span *ngSwitchDefault><b>Weather conditions:</b> n/a</span>
              </span>
              <span [ngSwitch]="event.weatherConditions[0].isEstimated">
                <span *ngSwitchCase="true"><b>Is it estimated?</b> Yes<br></span>
                <span *ngSwitchCase="false"><b>Is it estimated?</b> No<br></span>
                <span *ngSwitchDefault><b>Is it estimated?</b> n/a</span>
              </span>
              <span [ngSwitch]="event.weatherConditions[0].isChanging">
                <span *ngSwitchCase="true"><b>Is it changing?</b> Yes<br></span>
                <span *ngSwitchCase="false"><b>Is it changing?</b> No<br></span>
                <span *ngSwitchDefault><b>Is it changing?</b> n/a</span>
              </span>
            </span>
            <!-- DAMAGES -->
            <span *ngIf="event.damages">
              <hr>
              <b>Damages </b><br>
              <b>Date: </b>{{ (event.weatherConditions[0].dateTime | date:'mediumDate') || 'n/a' }}<br>
              <span [ngSwitch]="event.damages[0].isChanging">
                <span *ngSwitchCase="1"><b>Damage type:</b> Flooding<br></span>
                <span *ngSwitchCase="2"><b>Damage type:</b> Infrastructure<br></span>
                <span *ngSwitchCase="3"><b>Damage type:</b> Mortality<br></span>
                <span *ngSwitchCase="4"><b>Damage type:</b> Property<br></span>
                <span *ngSwitchCase="5"><b>Damage type:</b> Other<br></span>
                <span *ngSwitchDefault><b>Damage type:</b> n/a</span>
              </span>
              <b>Damage Type: </b>{{event.damages.isFlooding}}<br>
            </span>
          </mat-expansion-panel>

        </mat-accordion>
      </div>


    </main> <!-- End Main Content -->


  </div><!-- End Main Body Wrapper-->
</div>